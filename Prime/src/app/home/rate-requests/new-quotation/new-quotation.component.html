<div class="section-title">
    <h2>{{'Header.title'|translate}}</h2>
</div>
<div class="container mb-5">
    <a routerLink="/home/rate-request/srr-list"><i class='bx bx-arrow-back'></i>Back to List</a>
    <div class="col-md-9 mx-auto">
        <div class="tabs">
            <input type="radio" class="d-none" (change)="onchangeTab('1')" id="radio-1" name="tabs" />
            <label [class]="tabs == '1' ? 'tab ractive' : 'tab'" for="radio-1">General Details</label>
            <input type="radio" class="d-none" (change)="onchangeTab('2')" id="radio-2" name="tabs" />
            <label [class]="tabs == '2' ? 'tab ractive' : 'tab'" for="radio-2">Add Commodities</label>
            <input type="radio" class="d-none" (change)="onchangeTab('3')" id="radio-3" name="tabs" />
            <label [class]="tabs == '3' ? 'tab ractive' : 'tab'" for="radio-3">Add Container & Rates</label>
            <span class="glider d-none"></span>
        </div>
    </div>
    <div class="col-md-12 services">
        <form [formGroup]="quotationForm">
            <div class="card mt-2 icon-box text-start" *ngIf="tabs == '1'">
                <div class="card-body">
                    <div class="row mt-3">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select formControlName="PLACE_OF_RECEIPT">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of placeofRecpList"
                                        value="{{item.CODE_DESC}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.PlaceofReceipt'|translate}}</label>
                                <div *ngIf="submitted && f.PLACE_OF_RECEIPT.errors" class="invalid-feedback">
                                    Place of
                                    Receipt is invalid</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select (change)="getServiceName($event)"
                                    [ngClass]="{'invalid': submitted && f.POL.errors}" formControlName="POL">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option
                                        [disabled]="item.CODE == this.quotationForm.get('POD').value ? true : false "
                                        *ngFor="let item of polList" value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.PortofLoading'|translate}} <span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.POL.errors" class="invalid-feedback">Please select
                                    Port of Loading</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select (change)="onChangePOD($event)"
                                    [ngClass]="{'invalid': submitted && f.POD.errors}" formControlName="POD">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of podList;" value="{{item.CODE}}"
                                        [disabled]="item.CODE == this.quotationForm.get('POL').value ? true : false ">
                                        {{item.CODE_DESC}} ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.PortofDischarge'|translate}} <span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.POD.errors" class="invalid-feedback">Please select
                                    Port of Discharge</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select formControlName="PLACE_OF_DELIVERY">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of placeofDelList"
                                        value="{{item.CODE_DESC}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.PlaceofDelivery'|translate}}</label>
                                <div *ngIf="submitted && f.PLACE_OF_DELIVERY.errors" class="invalid-feedback">
                                    Place of
                                    Delivery is invalid</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted && f.FINAL_DESTINATION.errors}"
                                    formControlName="FINAL_DESTINATION">
                                    <ng-option value="" selected="true" disabled>--Select--
                                    </ng-option>
                                    <ng-option *ngFor="let item of finalDestList"
                                        value="{{item.CODE_DESC}}">{{item.CODE_DESC}} ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.FinalDestination'|translate}} <span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.FINAL_DESTINATION.errors" class="invalid-feedback">Please
                                    select
                                    Final Destination</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select formControlName="TSP_1">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option
                                        [disabled]="item.CODE == this.quotationForm.get('POL').value ? true : false || item.CODE == this.quotationForm.get('POD').value ? true : false "
                                        *ngFor="let item of podList" value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.Transhipment1'|translate}}</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <ng-select formControlName="TSP_2">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option
                                        [disabled]="item.CODE == this.quotationForm.get('POL').value ? true : false || item.CODE == this.quotationForm.get('POD').value ? true : false "
                                        *ngFor="let item of podList" value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.Transhipment2'|translate}}</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted && f.SERVICE_NAME.errors}"
                                    formControlName="SERVICE_NAME">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of servicenameList" value="{{item.CODE}}">{{item.CODE}}
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.ServiceName'|translate}} <span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.SERVICE_NAME.errors" class="invalid-feedback">Please select
                                    Service</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted && f.CUSTOMER_NAME.errors}"
                                    formControlName="CUSTOMER_NAME">
                                    <ng-option value="M" disabled>
                                        <button class="form-btn rounded-pill btn-sm" #openBtn5 data-bs-toggle="modal"
                                            href="#custModal"><i class="fa fa-plus me-1"></i> Customer</button>
                                    </ng-option>
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of customerList"
                                        value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.CustomerName'|translate}} <span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.CUSTOMER_NAME.errors" class="invalid-feedback">Please select
                                    Customer Name</div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <h5 class="mb-4">{{'Header.RateValidity'|translate}}</h5>
                    <div class="row">
                        <div class="col-md-4" *ngIf="!isVesselVal">
                            <div class="form-group">
                                <input type="date" [ngClass]="{'invalid': submitted && f.EFFECT_FROM.errors}"
                                    (change)="getEffectToDate($event, 1)" min={{currentDate}}
                                    formControlName="EFFECT_FROM" onkeypress="return false"
                                    class="form-control active" />
                                <label class="form-label">{{'Header.EffectFrom'|translate}} <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.EFFECT_FROM.errors" class="invalid-feedback">Please enter
                                    Effect From</div>
                            </div>
                        </div>
                        <div class="col-md-4" *ngIf="!isVesselVal">
                            <div class="form-group">
                                <input type="date" [ngClass]="{'invalid': submitted && f.EFFECT_TO.errors}"
                                    formControlName="EFFECT_TO" min="{{this.quotationForm.get('EFFECT_FROM').value}}"
                                    onkeypress="return false" class="form-control active" />
                                <label class="form-label">{{'Header.ValidTill'|translate}} <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted && f.EFFECT_TO.errors" class="invalid-feedback">Please enter
                                    Effect To</div>
                            </div>
                        </div>
                        <div [class]="isVesselVal ? 'col-md-4' : 'col-md-4 mt-md-3'">
                            <div class="form-group">
                                <div class="form-check form-switch">
                                    <input (change)="isVesselValidity($event)" class="form-check-input" type="checkbox"
                                        role="switch" />
                                    <label class="form-check-label">{{'Header.ApplyVesselValidity'|translate}}</label>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="isVesselVal"
                            [class]="!isVoyageAdded ? 'col-md-4 text-end' : 'col-md-4 offset-md-4 text-end'">
                            <button (click)="slotAllocation()" class="form-btn-primary">
                                <i class="fa fa-plus me-2"></i>{{'Button.SlotAllocation'|translate}}</button>
                        </div>
                    </div>
                    <form [formGroup]="slotDetailsForm" *ngIf="isVesselVal">
                        <div class="row">
                            <div class="col-md-6 border-end">
                                <div class="row mt-4">
                                    <div class="col-md-6 mb-4">
                                        <div class="form-group">
                                            <ng-select (change)="getVoyageList($event)"
                                                [ngClass]="{'invalid': submitted && f5.VESSEL_NAME.errors}"
                                                formControlName="VESSEL_NAME">
                                                <ng-option value="" selected="true" disabled>
                                                    --Select--</ng-option>
                                                <ng-option *ngFor="let item of vesselList" value="{{item.CODE}}">
                                                    {{item.CODE_DESC}}
                                                </ng-option>
                                            </ng-select>
                                            <label class="form-label-ddl">{{'Header.VesselName'|translate}}<span
                                                    class="text-danger">
                                                    *</span></label>
                                            <div *ngIf="submitted && f5.VESSEL_NAME.errors" class="invalid-feedback">
                                                Vessel Name is required
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <div class="form-group">
                                            <ng-select [ngClass]="{'invalid': submitted && f5.VOYAGE_NO.errors}"
                                                formControlName="VOYAGE_NO">
                                                <ng-option disabled><button data-bs-toggle="modal" href="#voyageModal"
                                                        class="form-btn rounded-pill btn-sm">Add
                                                        Voyage</button></ng-option>
                                                <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                                <ng-option *ngFor="let item of voyageList" value="{{item.CODE}}">
                                                    {{item.CODE}}
                                                </ng-option>
                                            </ng-select>
                                            <label class="form-label-ddl">{{'Header.VoyageNo'|translate}} <span
                                                    class="text-danger">
                                                    *</span></label>
                                            <div *ngIf="submitted && f5.VOYAGE_NO.errors" class="invalid-feedback">
                                                Voyage No is required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input formControlName="MOTHER_VESSEL_NAME" type="text"
                                                class="form-control" />
                                            <label class="form-label">{{'Header.MotherVesselName'|translate}}</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input formControlName="MOTHER_VOYAGE_NO" type="text"
                                                class="form-control" />
                                            <label class="form-label">{{'Header.MotherVesselVoyageNo'|translate}}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div [class]="isScroll ? 'scrollbar' : ''" id="style-3">
                                    <div [class]="isScroll ? 'force-overflow' : ''">
                                        <table class="table mt-3" style="font-size: 12px;">
                                            <tbody>
                                                <tr *ngFor="let item of s;let j = index;" [formGroup]="s1(item)">
                                                    <td>
                                                        <label class="mt-4"> {{j+1}}</label>
                                                    </td>
                                                    <td class="col-md-6">
                                                        <label
                                                            class="form-label3">{{'Header.SlotOperator'|translate}}</label>
                                                        <select
                                                            [ngClass]="{'invalid': submitted && f5.SLOT_LIST.controls[j].get('SLOT_OPERATOR').errors}"
                                                            class="form-control3" formControlName="SLOT_OPERATOR">
                                                            <option value="" selected disabled>
                                                                --Slot
                                                                Operator--</option>
                                                            <option *ngFor="let item of slotoperatorList"
                                                                value="{{item.CODE}}">
                                                                {{item.CODE_DESC}}</option>
                                                        </select>
                                                        <div *ngIf="submitted && f5.SLOT_LIST.controls[j].get('SLOT_OPERATOR').errors"
                                                            class="invalid-feedback">Slot Operator is required
                                                        </div>
                                                    </td>
                                                    <td class="col-md-4">
                                                        <label
                                                            class="form-label3">{{'Header.NoofSlots'|translate}}</label>
                                                        <input maxlength="5"
                                                            [ngClass]="{'invalid': submitted && f5.SLOT_LIST.controls[j].get('NO_OF_SLOTS').errors}"
                                                            onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                                                            (keypress)="numericOnly($event)" class="form-control3"
                                                            formControlName="NO_OF_SLOTS" type="text" />
                                                        <div *ngIf="submitted && f5.SLOT_LIST.controls[j].get('NO_OF_SLOTS').errors"
                                                            class="invalid-feedback">No of Slots is required
                                                        </div>
                                                    </td>
                                                    <td class="col-md-2">
                                                        <a *ngIf="j>0" (click)="removeItem(j)"><i
                                                                class="fa fa-trash  mt-4"
                                                                style="font-size:15px"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <hr>
                    <div class="row">
                        <div class="col-md-2 offset-md-10 text-end">
                            <button (click)="saveQuotation()"
                                class="form-btn w-100">{{'Button.Save'|translate}}</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <form [formGroup]="commoditiesForm">
            <div class="card mt-2" *ngIf="tabs == '2'">
                <div class="card-body">
                    <div class="row mt-3">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" class="form-control" maxlength="100" formControlName="COMMODITY_NAME"
                                    [ngClass]="{'invalid': submitted2 && f2.COMMODITY_NAME.errors}" />
                                <label class="form-label">{{'Header.CommodityName'|translate}} <span
                                        class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.COMMODITY_NAME.errors" class="invalid-feedback">
                                    Please
                                    enter
                                    Commodity Name</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select formControlName="COMMODITY_TYPE" (change)="onChangeCommodityType($event)"
                                    [ngClass]="{'invalid': submitted2 && f2.COMMODITY_TYPE.errors}">
                                    <ng-option value="" selected="true" disabled>--Select Commodity Type--</ng-option>
                                    <ng-option [disabled]="disabledcommodityType.includes('GEN')"
                                        value="GEN">General</ng-option>
                                    <ng-option [disabled]="disabledcommodityType.includes('HAZ')"
                                        value="HAZ">Hazardous</ng-option>
                                    <ng-option [disabled]="disabledcommodityType.includes('FLEXIBAG')"
                                        value="FLEXIBAG">Flexi
                                        Bag</ng-option>
                                    <ng-option [disabled]="disabledcommodityType.includes('REEFER')"
                                        value="REEFER">Reefer</ng-option>
                                    <ng-option [disabled]="disabledcommodityType.includes('SP')" value="SP">Special
                                        Equipment
                                        (OOG)</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.CommodityType'|translate}} <span
                                        class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.COMMODITY_TYPE.errors" class="invalid-feedback">
                                    Please
                                    select
                                    Commodity Type</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4" *ngIf="commodityType == 'FLEXIBAG'">
                            <div class="form-group">
                                <input type="text" formControlName="FLASH_POINT" (keypress)="numericOnly($event)"
                                    maxlength="4" [ngClass]="{'invalid': submitted2 && f2.FLASH_POINT.errors}"
                                    class="form-control" />
                                <label class="form-label">Flash Point (&#8451;) <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted2 && f2.FLASH_POINT.errors" class="invalid-feedback">
                                    Please enter Flash Point
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4" *ngIf="commodityType == 'HAZ'">
                            <div class="form-group">
                                <ng-select formControlName="IMO_CLASS" (change)="onchangeIMO($event)"
                                    [ngClass]="{'invalid': submitted2 && f2.IMO_CLASS.errors}">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of imoclassList"
                                        value="{{item.CODE}}">{{item.CODE}}</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">IMO Class Name <span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.IMO_CLASS.errors" class="invalid-feedback">
                                    Please enter IMO Class Name
                                </div>
                            </div>
                        </div>

                        <div class="col-md-2 mb-4"
                            *ngIf="commodityType == 'GEN' || commodityType == 'REEFER' || commodityType == 'SP'">
                            <div class="form-group">
                                <input type="text" formControlName="WEIGHT" maxlength="5"
                                    (keypress)="numericOnly($event)"
                                    [ngClass]="{'invalid': submitted2 && f2.WEIGHT.errors}" class="form-control" />
                                <label class="form-label">Weight (per container)<span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted2 && f2.WEIGHT.errors" class="invalid-feedback">
                                    Please enter Weight
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4"
                            *ngIf="commodityType == 'GEN' || commodityType == 'REEFER' || commodityType == 'SP'">
                            <div class="form-group">
                                <ng-select formControlName="WEIGHT_UNIT"
                                    [ngClass]="{'invalid': submitted2 && f2.WEIGHT_UNIT.errors}">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option value="KG">Kg</ng-option>
                                    <ng-option value="MT">MT</ng-option>
                                    <ng-option value="TN">Tons</ng-option>
                                    <ng-option value="GL">Gallons</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Unit<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.WEIGHT_UNIT.errors" class="invalid-feedback">
                                    Please enter Weight Unit
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="commodityType == 'HAZ'|| commodityType == 'SP'">
                        <div class="col-md-4 mb-4" *ngIf="commodityType == 'HAZ'">
                            <div class="form-group">
                                <ng-select formControlName="UN_NO" (change)="onchangeUN($event)"
                                    [ngClass]="{'invalid': submitted2 && f2.UN_NO.errors}">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of unnoList"
                                        value="{{item.CODE_DESC}}">{{item.CODE}}</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">UN No <span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.UN_NO.errors" class="invalid-feedback">
                                    Please enter UN No
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4" *ngIf="commodityType == 'HAZ'">
                            <div class="form-group">
                                <input type="text" maxlength="20" formControlName="HAZ_APPROVAL_REF"
                                    [ngClass]="{'invalid': submitted2 && f2.HAZ_APPROVAL_REF.errors}"
                                    class="form-control" />
                                <label class="form-label">HAZ Approval Ref </label>
                                <div *ngIf="submitted2 && f2.HAZ_APPROVAL_REF.errors?.pattern" class="invalid-feedback">
                                    HAZ Approval Ref should be alphanumeric
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4" *ngIf="commodityType == 'HAZ'">
                            <div class="form-group">
                                <input type="text" formControlName="WEIGHT" maxlength="5"
                                    (keypress)="numericOnly($event)"
                                    [ngClass]="{'invalid': submitted2 && f2.WEIGHT.errors}" class="form-control" />
                                <label class="form-label">Weight (per container)<span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted2 && f2.WEIGHT.errors" class="invalid-feedback">
                                    Please enter Weight
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4" *ngIf="commodityType == 'HAZ'">
                            <div class="form-group">
                                <ng-select formControlName="WEIGHT_UNIT"
                                    [ngClass]="{'invalid': submitted2 && f2.WEIGHT_UNIT.errors}">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option value="KG">Kg</ng-option>
                                    <ng-option value="MT">MT</ng-option>
                                    <ng-option value="TN">Tons</ng-option>
                                    <ng-option value="GL">Gallons</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Unit<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.WEIGHT_UNIT.errors" class="invalid-feedback">
                                    Please enter Weight Unit
                                </div>
                            </div>
                        </div>

                        <div class="col-md-2 mb-4" *ngIf="commodityType == 'SP'">
                            <div class="form-group">
                                <input type="text" [ngClass]="{'invalid': submitted2 && f2.LENGTH.errors}"
                                    formControlName="LENGTH" class="form-control" />
                                <label class="form-label">Length (cms)<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.LENGTH.errors" class="invalid-feedback">
                                    Please enter Length
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4" *ngIf="commodityType == 'SP'">
                            <div class="form-group">
                                <input type="text" [ngClass]="{'invalid': submitted2 && f2.WIDTH.errors}"
                                    formControlName="WIDTH" class="form-control" />
                                <label class="form-label">Width (cms)<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.WIDTH.errors" class="invalid-feedback">
                                    Please enter Width
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4" *ngIf="commodityType == 'SP'">
                            <div class="form-group">
                                <input type="text" [ngClass]="{'invalid': submitted2 && f2.HEIGHT.errors}"
                                    formControlName="HEIGHT" class="form-control" />
                                <label class="form-label">Height (cms)<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.HEIGHT.errors" class="invalid-feedback">
                                    Please enter Height
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="commodityType == 'HAZ'">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="REMARKS" class="form-control" maxlength="100" />
                                <label class="form-label">Remarks</label>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <label class="label-header">IMO Class </label>
                            <small class="text-danger ms-1">{{commoditiesForm.value.IMO_CLASS_NAME}}</small>
                        </div>
                        <div class="col-md-4 mb-4">
                            <label class="label-header">UN No (Hazardous Material)</label><small
                                class="text-danger ms-1">{{commoditiesForm.value.UN_NO_NAME}}</small>
                        </div>
                    </div>
                    <div class="row" *ngIf="commodityType == 'FLEXIBAG'">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="CAS_NO" (keypress)="numericOnly($event)"
                                    maxlength="50" [ngClass]="{'invalid': submitted2 && f2.CAS_NO.errors}"
                                    class="form-control" />
                                <label class="form-label">CAS No <span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.CAS_NO.errors" class="invalid-feedback">
                                    Please enter CAS No
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="WEIGHT" maxlength="5"
                                    (keypress)="numericOnly($event)"
                                    [ngClass]="{'invalid': submitted2 && f2.WEIGHT.errors}" class="form-control" />
                                <label class="form-label">Weight (per container)<span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted2 && f2.WEIGHT.errors" class="invalid-feedback">
                                    Please enter Weight
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4">
                            <div class="form-group">
                                <ng-select formControlName="WEIGHT_UNIT"
                                    [ngClass]="{'invalid': submitted2 && f2.WEIGHT_UNIT.errors}">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option value="KG">Kg</ng-option>
                                    <ng-option value="MT">MT</ng-option>
                                    <ng-option value="TN">Tons</ng-option>
                                    <ng-option value="GL">Gallons</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Unit<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.WEIGHT_UNIT.errors" class="invalid-feedback">
                                    Please enter Weight Unit
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="REMARKS" class="form-control" maxlength="100" />
                                <label class="form-label">Remarks</label>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="commodityType == 'REEFER'">
                        <div class="col-md-2 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="VENTILATION"
                                    [ngClass]="{'invalid': submitted2 && f2.VENTILATION.errors}" class="form-control" />
                                <label class="form-label">Ventilation<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.VENTILATION.errors?.required" class="invalid-feedback">
                                    Please enter Ventilation
                                </div>
                                <div *ngIf="submitted2 && f2.VENTILATION.errors?.pattern" class="invalid-feedback">
                                    Ventilation should be alphanumeric
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="HUMIDITY"
                                    [ngClass]="{'invalid': submitted2 && f2.HUMIDITY.errors}" class="form-control" />
                                <label class="form-label">Humidity<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.HUMIDITY.errors?.required" class="invalid-feedback">
                                    Please enter Humidity
                                </div>
                                <div *ngIf="submitted2 && f2.HUMIDITY.errors?.pattern" class="invalid-feedback">
                                    Humidity should be alphanumeric
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="TEMPERATURE"
                                    [ngClass]="{'invalid': submitted2 && f2.TEMPERATURE.errors}"
                                    (keypress)="tempValidation($event)" maxlength="{{maxValue}}" class="form-control" />
                                <label class="form-label">Temperature (°C)<span class="text-danger"> *</span></label>
                                <div *ngIf="submitted2 && f2.TEMPERATURE.errors" class="invalid-feedback">
                                    Please enter Temperature
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="REMARKS" class="form-control" maxlength="100" />
                                <label class="form-label">Remarks</label>
                            </div>
                        </div>
                    </div>

                    <div class="row" *ngIf="commodityType == 'GEN'">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" formControlName="REMARKS" class="form-control" maxlength="100" />
                                <label class="form-label">Remarks</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2 offset-md-10" style="text-align: right;">
                            <button (click)="addCommodity()" class="form-btn-primary w-100">Add Commodity</button>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table style="font-size: 12px;" class="table align-middle my-3 bg-white" *ngIf="f7?.length > 0">
                            <thead class="bg-light">
                                <tr>
                                    <th>Sr. No</th>
                                    <th>Commodity</th>
                                    <th>Commodity Type</th>
                                    <th>Weight</th>
                                    <th>IMO Class</th>
                                    <th>UN No</th>
                                    <th>Flash Point</th>
                                    <th>CAS No</th>
                                    <th>Ventilation</th>
                                    <th>Humidity</th>
                                    <th>Temperature</th>
                                    <th>L-W-H (cms)</th>
                                    <th>Remarks</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of f7; let i = index">
                                    <td>{{ i + 1 }}</td>
                                    <td>{{ item.value.COMMODITY_NAME }}</td>
                                    <td>{{ item.value.COMMODITY_TYPE == 'HAZ' ? 'Hazardous' : item.value.COMMODITY_TYPE
                                        == 'FLEXIBAG' ? 'Flexi Bag' : item.value.COMMODITY_TYPE == 'REEFER' ? 'Reefer' :
                                        item.value.COMMODITY_TYPE == 'SP' ? 'Special Equipment' : 'General' }}</td>
                                    <td>{{item.value.WEIGHT}} ({{item.value.WEIGHT_UNIT}})</td>
                                    <td>{{ item.value.IMO_CLASS == null ? '-': item.value.IMO_CLASS == '' ? '-' :
                                        item.value.IMO_CLASS }} {{imoclassNames}}</td>
                                    <td>{{ item.value.UN_NO == null ? '-' : item.value.UN_NO == '' ? '-' :
                                        item.value.UN_NO}} {{unno}}</td>
                                    <td>{{ item.value.FLASH_POINT == null ? '-' : item.value.FLASH_POINT == '' ? '-' :
                                        item.value.FLASH_POINT }}</td>
                                    <td>{{ item.value.CAS_NO == null ? '-' : item.value.CAS_NO == '' ? '-' :
                                        item.value.CAS_NO }}</td>
                                    <td>{{ item.value.VENTILATION }}</td>
                                    <td>{{ item.value.HUMIDITY }}</td>
                                    <td>{{ item.value.TEMPERATURE }}</td>
                                    <td>{{ item.value.LENGTH }} - {{ item.value.WIDTH }} - {{ item.value.HEIGHT }}
                                    </td>
                                    <td>{{ item.value.REMARKS == null ? '-' : item.value.REMARKS == '' ? '-' :
                                        item.value.REMARKS }}</td>
                                    <td><a class="pointer" (click)="removeCommodity(i)"><i style="font-size:18px"
                                                class="fa fa-trash mt-3"></i></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row" *ngIf="f7.length > 0">
                        <div class="col-md-2 offset-md-10" style="text-align: right;">
                            <button (click)="saveCommodity()" class="form-btn w-100">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <form [formGroup]="containerForm">
            <div class="card mt-2" *ngIf="tabs == '3'">
                <div class="card-body">
                    <div class="row mt-3">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted1 && f1.CONTAINER_TYPE.errors}"
                                    formControlName="CONTAINER_TYPE">
                                    <ng-option value="" selected="true" disabled>--Select Container--</ng-option>
                                    <ng-option [disabled]="item.CODE == '20GP' ? false : true"
                                        *ngFor="let item of containerTypeList" value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})</ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.Container'|translate}}<span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted1 && f1.CONTAINER_TYPE.errors" class="invalid-feedback">Please
                                    select
                                    Container</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <ng-select formControlName="SERVICE_MODE"
                                    [ngClass]="{'invalid': submitted1 && f1.SERVICE_MODE.errors}">
                                    <ng-option value="" selected="true" disabled>--Select Service Mode--</ng-option>
                                    <ng-option *ngFor="let item of servicetypeList"
                                        [disabled]="item.CODE == 'CFS/CY' ? true : item.CODE == 'CY/CFS' ? true : item.CODE == 'CFS/CFS' ? true : false "
                                        value="{{ item.CODE }}">
                                        {{ item.CODE }}
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">{{'Header.ServiceMode'|translate}} <span
                                        class="text-danger"> *</span></label>
                                <div *ngIf="submitted1 && f1.SERVICE_MODE.errors" class="invalid-feedback">Please
                                    select
                                    Service Mode</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" maxlength="3"
                                    onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                                    formControlName="POL_FREE_DAYS"
                                    [ngClass]="{'invalid': submitted1 && f1.POL_FREE_DAYS.errors}"
                                    class="form-control" />
                                <label class="form-label">{{'Header.POLFreeDays'|translate}} <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted1 && f1.POL_FREE_DAYS.errors" class="invalid-feedback">Please
                                    enter
                                    POL Free Days</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" maxlength="3"
                                    onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                                    formControlName="POD_FREE_DAYS"
                                    [ngClass]="{'invalid': submitted1 && f1.POD_FREE_DAYS.errors}"
                                    class="form-control" />
                                <label class="form-label">{{'Header.PODFreeDays'|translate}}<span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted1 && f1.POD_FREE_DAYS.errors" class="invalid-feedback">Please
                                    enter
                                    POD Free Days</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" maxlength="5"
                                    onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                                    formControlName="IMM_VOLUME_EXPECTED"
                                    [ngClass]="{'invalid': submitted1 && f1.IMM_VOLUME_EXPECTED.errors}"
                                    class="form-control" />
                                <label class="form-label">{{'Header.ImmediateVolumeExpected'|translate}}<span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted1 && f1.IMM_VOLUME_EXPECTED.errors" class="invalid-feedback">Please
                                    enter
                                    Imm Volume Expected</div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="form-group">
                                <input type="text" maxlength="5"
                                    onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                                    formControlName="TOTAL_VOLUME_EXPECTED"
                                    [ngClass]="{'invalid': submitted1 && f1.TOTAL_VOLUME_EXPECTED.errors}"
                                    class="form-control" />
                                <label class="form-label">{{'Header.TotalVolumeExpected'|translate}}<span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted1 && f1.TOTAL_VOLUME_EXPECTED.errors" class="invalid-feedback">
                                    Please
                                    enter
                                    Total Volume Expected</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2 offset-md-10" style="text-align: right;">
                            <button (click)="openModal()" class="form-btn-primary w-100">Add
                                Rate</button>
                            <button #RateModal data-bs-toggle="modal" href="#rateModal" class="d-none">Add
                                Rate</button>

                        </div>
                    </div>
                    <div class="modal fade" id="rateModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-lg  modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Rate Details</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                                        #closeBtn></button>
                                </div>
                                <div class="modal-body">
                                    <div class="col-md-12">
                                        <h6 style="font-weight: 600;">POL : <small
                                                class="text-danger mr-2">{{quotationForm.value.POL}}</small>&nbsp;
                                            POD : <small
                                                class="text-danger mr-2">{{quotationForm.value.POD}}</small>&nbsp;
                                            Container : <small
                                                class="text-danger mr-2">{{containerForm.value.CONTAINER_TYPE}}
                                                x {{containerForm.value.IMM_VOLUME_EXPECTED}}
                                            </small>&nbsp;
                                            Service Mode : <small
                                                class="text-danger">{{containerForm.value.SERVICE_MODE}}</small>&nbsp;
                                        </h6>
                                        <h6 *ngIf="isVesselVal" style="font-weight: 600;">
                                            Vessel/ Voyage : <small
                                                class="text-danger">{{slotDetailsForm.value.VESSEL_NAME}}/
                                                {{slotDetailsForm.value.VOYAGE_NO}}</small>
                                        </h6>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="accordion mt-3" id="accordion" role="tablist">
                                                <div class="card">
                                                    <div class="card-header" role="tab" id="heading-1">
                                                        <h6 class="mb-0">
                                                            <a data-bs-toggle="collapse" href="#collapse-1"
                                                                aria-expanded="false" aria-controls="collapse-1"
                                                                data-abc="true" class="collapsed">
                                                                <span class="fw-bolder">Freight Charges</span>
                                                            </a>
                                                        </h6>
                                                    </div>
                                                    <div id="collapse-1" class="collapse show" role="tabpanel"
                                                        aria-labelledby="heading-1" data-bs-parent="#accordion">
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <table class="table" *ngIf="f3?.length > 0"
                                                                    style="font-size: 12px;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th width="15%">Charge</th>
                                                                            <th width="10%">Currency</th>
                                                                            <th width="20%">Payment</th>
                                                                            <th width="15%">Place</th>
                                                                            <th width="10%">Income</th>
                                                                            <th width="9%">Requested</th>
                                                                            <th width="20%">Remarks</th>
                                                                            <th width="1%"></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr *ngFor="let item of f3;let j = index;"
                                                                            [formGroup]="item">
                                                                            <td width="15%">{{item.value.CHARGE_CODE}}
                                                                            </td>
                                                                            <td width="10%">{{item.value.CURRENCY}}</td>
                                                                            <td width="20%">
                                                                                <select class="form-control3"
                                                                                    (change)="OnPaymentTerm($event,j,'FREIGHT_CHARGES')"
                                                                                    formControlName="PAYMENT_TERM">
                                                                                    <option value=null selected
                                                                                        disabled>
                                                                                        --Select--
                                                                                    </option>
                                                                                    <option value="Prepaid">Prepaid
                                                                                    </option>
                                                                                    <option value="Collect">Collect
                                                                                    </option>
                                                                                </select>
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('PAYMENT_TERM').errors">required</span>
                                                                            </td>
                                                                            <td width="15%">
                                                                                <select class="form-control3"
                                                                                    formControlName="TRANSPORT_TYPE">
                                                                                    <option value=null selected
                                                                                        disabled>
                                                                                        --Select--
                                                                                    </option>
                                                                                    <option value="POL">POL</option>
                                                                                    <option value="POD">POD</option>
                                                                                </select>
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('TRANSPORT_TYPE').errors">required</span>
                                                                            </td>
                                                                            <td width="10%">{{item.value.RATE}}</td>
                                                                            <td width="9%">
                                                                                <input class="form-control3"
                                                                                    maxlength="5"
                                                                                    (keypress)="numericOnly($event)"
                                                                                    formControlName="RATE_REQUESTED"
                                                                                    type="text" />
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('RATE_REQUESTED').errors">required</span>
                                                                            </td>
                                                                            <td width="20%"><input type="text"
                                                                                    formControlName="AGENT_REMARKS"
                                                                                    class="form-control3" /></td>
                                                                            <td width="1%"> <i style="font-size: 20px;"
                                                                                    placement="right"
                                                                                    tooltip="Please enter rate after deducting BAF & EWRI"
                                                                                    *ngIf="item.value.CHARGE_CODE == 'Freight'"
                                                                                    class="fa fa-info-circle ms-1"></i>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                <h6 *ngIf="f3?.length == 0" class="text-center">No
                                                                    Records !</h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card">
                                                    <div class="card-header" role="tab" id="heading-4">
                                                        <h6 class="mb-0">
                                                            <a data-bs-toggle="collapse" href="#collapse-4"
                                                                aria-expanded="false" aria-controls="collapse-4"
                                                                data-abc="true" class="collapsed">
                                                                <span class="fw-bolder">POL Charges</span>
                                                            </a>
                                                        </h6>
                                                    </div>
                                                    <div id="collapse-4" class="collapse" role="tabpanel"
                                                        aria-labelledby="heading-4" data-bs-parent="#accordion">
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <table class="table" *ngIf="f4?.length > 0"
                                                                    style="font-size: 12px;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th width="15%">Charge</th>
                                                                            <th width="10%">Currency</th>
                                                                            <th width="20%">Payment</th>
                                                                            <th width="15%">Place</th>
                                                                            <th width="10%">Income</th>
                                                                            <th width="9%">Requested</th>
                                                                            <th width="20%">Remarks</th>
                                                                            <th width="1%"></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr *ngFor="let item of f4;let j = index;"
                                                                            [formGroup]="item">
                                                                            <td width="15%">{{item.value.CHARGE_CODE}}
                                                                            </td>
                                                                            <td width="10%">{{item.value.CURRENCY}}</td>
                                                                            <td width="20%">
                                                                                <select class="form-control3"
                                                                                    (change)="OnPaymentTerm($event,j,'POL_CHARGES')"
                                                                                    formControlName="PAYMENT_TERM">
                                                                                    <option value=null selected
                                                                                        disabled>
                                                                                        --Select--
                                                                                    </option>
                                                                                    <option value="Prepaid">Prepaid
                                                                                    </option>
                                                                                    <option value="Collect">Collect
                                                                                    </option>
                                                                                </select>
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('PAYMENT_TERM').errors">required</span>
                                                                            </td>
                                                                            <td width="15%">
                                                                                <select class="form-control3"
                                                                                    formControlName="TRANSPORT_TYPE">
                                                                                    <option value=null selected
                                                                                        disabled>
                                                                                        --Select--
                                                                                    </option>
                                                                                    <option value="POL">POL</option>
                                                                                    <option value="POD">POD</option>
                                                                                </select>
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('TRANSPORT_TYPE').errors">required</span>
                                                                            </td>
                                                                            <td width="10%">{{item.value.RATE}}</td>
                                                                            <td width="9%">
                                                                                <input class="form-control3"
                                                                                    maxlength="5"
                                                                                    (keypress)="numericOnly($event)"
                                                                                    formControlName="RATE_REQUESTED"
                                                                                    type="text" />
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('RATE_REQUESTED').errors">required</span>
                                                                            </td>
                                                                            <td width="20%"><input type="text"
                                                                                    formControlName="AGENT_REMARKS"
                                                                                    class="form-control3" /></td>
                                                                            <td width="1%"> <i placement="right"
                                                                                    tooltip="Please enter rate after deducting BAF & EWRI"
                                                                                    *ngIf="item.value.CHARGE_CODE == 'Freight'"
                                                                                    class="fa fa-info-circle ms-1"></i>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                <h6 *ngIf="f4?.length == 0" class="text-center">No
                                                                    Records !</h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card">
                                                    <div class="card-header" role="tab" id="heading-5">
                                                        <h6 class="mb-0">
                                                            <a data-bs-toggle="collapse" href="#collapse-5"
                                                                aria-expanded="false" aria-controls="collapse-5"
                                                                data-abc="true" class="collapsed">
                                                                <span class="fw-bolder">POD Charges</span>
                                                            </a>
                                                        </h6>
                                                    </div>
                                                    <div id="collapse-5" class="collapse" role="tabpanel"
                                                        aria-labelledby="heading-5" data-bs-parent="#accordion">
                                                        <div class="card-body">
                                                            <div class="table-responsive">
                                                                <table class="table" *ngIf="f4?.length > 0"
                                                                    style="font-size: 12px;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th width="15%">Charge</th>
                                                                            <th width="10%">Currency</th>
                                                                            <th width="20%">Payment</th>
                                                                            <th width="15%">Place</th>
                                                                            <th width="10%">Income</th>
                                                                            <th width="9%">Requested</th>
                                                                            <th width="20%">Remarks</th>
                                                                            <th width="1%"></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr *ngFor="let item of f8;let j = index;"
                                                                            [formGroup]="item">
                                                                            <td width="15%">{{item.value.CHARGE_CODE}}
                                                                            </td>
                                                                            <td width="10%">{{item.value.CURRENCY}}</td>
                                                                            <td width="20%">
                                                                                <select class="form-control3"
                                                                                    (change)="OnPaymentTerm($event,j,'POD_CHARGES')"
                                                                                    formControlName="PAYMENT_TERM">
                                                                                    <option value=null selected
                                                                                        disabled>
                                                                                        --Select--
                                                                                    </option>
                                                                                    <option value="Prepaid">Prepaid
                                                                                    </option>
                                                                                    <option value="Collect">Collect
                                                                                    </option>
                                                                                </select>
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('PAYMENT_TERM').errors">required</span>
                                                                            </td>
                                                                            <td width="15%">
                                                                                <select class="form-control3"
                                                                                    formControlName="TRANSPORT_TYPE">
                                                                                    <option value=null selected
                                                                                        disabled>
                                                                                        --Select--
                                                                                    </option>
                                                                                    <option value="POL">POL</option>
                                                                                    <option value="POD">POD</option>
                                                                                </select>
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('TRANSPORT_TYPE').errors">required</span>
                                                                            </td>
                                                                            <td width="10%">{{item.value.RATE}}</td>
                                                                            <td width="9%">
                                                                                <input class="form-control3"
                                                                                    maxlength="5"
                                                                                    (keypress)="numericOnly($event)"
                                                                                    formControlName="RATE_REQUESTED"
                                                                                    type="text" />
                                                                                <span class="invalid-feedback"
                                                                                    *ngIf="submiitedRate && item.get('RATE_REQUESTED').errors">required</span>
                                                                            </td>
                                                                            <td width="20%"><input type="text"
                                                                                    formControlName="AGENT_REMARKS"
                                                                                    class="form-control3" /></td>
                                                                            <td width="1%"> <i placement="right"
                                                                                    tooltip="Please enter rate after deducting BAF & EWRI"
                                                                                    *ngIf="item.value.CHARGE_CODE == 'Freight'"
                                                                                    class="fa fa-info-circle ms-1"></i>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                <h6 *ngIf="f8?.length == 0" class="text-center">No
                                                                    Records !</h6>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" (click)="submitRate()" class="form-btn">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4 mb-2" *ngIf="isContainer">
                        <div class="table-responsive">
                            <table class="table align-middle" style="font-size: 12px">
                                <thead>
                                    <tr class="bg-light">
                                        <th>Sr. No</th>
                                        <th>Container</th>
                                        <th>Service Mode</th>
                                        <th>Rates</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of containerList;let i = index">
                                        <td>{{i+1}}</td>
                                        <td>{{item.Container}}</td>
                                        <td>{{item.ServiceMode}}</td>
                                        <td>
                                            <a (click)="openRateDetailModal(i)"><i class="fa fa-eye text-dark"></i></a>
                                            <button #RateDetailModal data-bs-toggle="modal" href="#rateDetailsModal"
                                                class="d-none">Add
                                                Rate</button>
                                        </td>
                                        <td>
                                            <a (click)="removeRate(i)">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row" *ngIf="isContainer">
                        <div class="col-md-2 offset-md-10 text-end">
                            <button [disabled]="isLoading" (click)="saveContainer()" class="form-btn w-100">Submit
                                <span *ngIf="isLoading" class="fa fa-spinner fa-spin"></span></button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="modal fade" #rateDetailModal id="rateDetailsModal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Rate Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeBtn></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table" style="font-size: 12px;">
                        <thead>
                            <tr>
                                <th>Charge Code</th>
                                <th>Currency</th>
                                <th>Payment</th>
                                <th>Place</th>
                                <th>Standard</th>
                                <th>Requested</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item1 of containerList[connIndex]?.FREIGHTCHARGE_LIST">
                                <td>{{item1.CHARGE_CODE}}</td>
                                <td>{{item1.CURRENCY}}</td>
                                <td>{{item1.PAYMENT_TERM}}</td>
                                <td>{{item1.TRANSPORT_TYPE}}</td>
                                <td>{{item1.RATE}}</td>
                                <td>{{item1.RATE_REQUESTED}}</td>
                            </tr>
                            <tr *ngFor="let item1 of containerList[connIndex]?.POLCHARGE_LIST">
                                <td>{{item1.CHARGE_CODE}}</td>
                                <td>{{item1.CURRENCY}}</td>
                                <td>{{item1.PAYMENT_TERM}}</td>
                                <td>{{item1.TRANSPORT_TYPE}}</td>
                                <td>{{item1.RATE}}</td>
                                <td>{{item1.RATE_REQUESTED}}</td>
                            </tr>
                            <tr *ngFor="let item1 of containerList[connIndex]?.PODCHARGE_LIST">
                                <td>{{item1.CHARGE_CODE}}</td>
                                <td>{{item1.CURRENCY}}</td>
                                <td>{{item1.PAYMENT_TERM}}</td>
                                <td>{{item1.TRANSPORT_TYPE}}</td>
                                <td>{{item1.RATE}}</td>
                                <td>{{item1.RATE_REQUESTED}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" #voyageModal id="voyageModal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Voyage Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeBtn3></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="voyageForm">
                    <div class="row my-4">
                        <div class="col-md-3">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted3 && f6.VESSEL_NAME.errors}"
                                    formControlName="VESSEL_NAME">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of vesselList1" value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Vessel <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.VESSEL_NAME.errors" class="invalid-feedback">Please select
                                    Vessel</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <input type="text" maxlength="100" formControlName="VOYAGE_NO" class="form-control">
                                <label class="form-label"
                                    [ngClass]="{'invalid': submitted3 && f6.VOYAGE_NO.errors}">Voyage No <span
                                        class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.VOYAGE_NO.errors" class="invalid-feedback">
                                    Voyage No is required</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <input type="date" onkeypress="return false"
                                    (change)="voyageForm.get('ATD')?.setValue('')"
                                    [ngClass]="{'invalid': submitted3 && f6.ATA.errors}" formControlName="ATA"
                                    class="form-control">
                                <label class="form-label">ATA <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.ATA.errors" class="invalid-feedback">
                                    ATA is required</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <input type="date" onkeypress="return false" [min]="voyageForm.get('ATA')?.value"
                                    [ngClass]="{'invalid': submitted3 && f6.ATD.errors}" formControlName="ATD"
                                    class="form-control">
                                <label class="form-label">ATD <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.ATD.errors" class="invalid-feedback">
                                    ATD is required</div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="form-group">
                                <input type="date" onkeypress="return false"
                                    (change)="voyageForm.get('ETD')?.setValue('')"
                                    [ngClass]="{'invalid': submitted3 && f6.ETA.errors}" formControlName="ETA"
                                    class="form-control">
                                <label class="form-label">ETA <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.ETA.errors" class="invalid-feedback">
                                    ETA is required</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <input type="date" onkeypress="return false" [min]="voyageForm.get('ETA')?.value"
                                    [ngClass]="{'invalid': submitted3 && f6.ETD.errors}" formControlName="ETD"
                                    class="form-control">
                                <label class="form-label">ETD <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.ETD.errors" class="invalid-feedback">
                                    ETD is required</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <ng-select (change)="getServiceName1($event)"
                                    [ngClass]="{'invalid': submitted3 && f6.PORT_CODE.errors}"
                                    formControlName="PORT_CODE">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of podList" value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Port<span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.PORT_CODE.errors" class="invalid-feedback">Please select
                                    Port</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted3 && f6.TERMINAL_CODE.errors}"
                                    formControlName="TERMINAL_CODE">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of terminalList" value={{item.CODE}}>{{item.CODE_DESC}}
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Terminal <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.TERMINAL_CODE.errors" class="invalid-feedback">Please
                                    select
                                    Terminal</div>
                            </div>
                        </div>
                        <!-- <div class="col-md-3">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted3 && f6.IMM_CURR.errors}"
                                    formControlName="IMM_CURR">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of currencyList"
                                        value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Import Currency <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.IMM_CURR.errors" class="invalid-feedback">Please select
                                    Vessel</div>
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group">
                                <input type="text" [ngClass]="{'invalid': submitted3 && f6.IMM_CURR_RATE.errors}"
                                    maxlength="100" formControlName="IMM_CURR_RATE" class="form-control">
                                <label class="form-label">Import Currency Rate <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.IMM_CURR_RATE.errors" class="invalid-feedback">
                                    Import Currency Rate is required</div>
                            </div>
                        </div> -->
                    </div>
                    <!-- <div class="col-md-3">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted3 && f6.EXP_CURR.errors}"
                                    formControlName="EXP_CURR">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of currencyList1"
                                        value="{{item.CODE}}">{{item.CODE_DESC}}
                                        ({{item.CODE}})
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Export Currency <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.EXP_CURR.errors" class="invalid-feedback">Please select
                                    Export Currency</div>
                            </div>
                        </div> -->
                    <!-- <div class="col-md-3">
                            <div class="form-group">
                                <input type="text" [ngClass]="{'invalid': submitted3 && f6.EXP_CURR_RATE.errors}"
                                    maxlength="100" formControlName="EXP_CURR_RATE" class="form-control">
                                <label class="form-label">Export Currency Rate <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.EXP_CURR_RATE.errors" class="invalid-feedback">
                                    Export Currency Rate is required</div>
                            </div>
                        </div> -->


                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="form-group">
                                <ng-select [ngClass]="{'invalid': submitted3 && f6.SERVICE_NAME.errors}"
                                    formControlName="SERVICE_NAME">
                                    <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                    <ng-option *ngFor="let item of servicenameList1"
                                        value="{{item.CODE}}">{{item.CODE_DESC}}
                                    </ng-option>
                                </ng-select>
                                <label class="form-label-ddl">Service <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.SERVICE_NAME.errors" class="invalid-feedback">Please select
                                    Service</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <input type="text" [ngClass]="{'invalid': submitted3 && f6.VIA_NO.errors}"
                                    maxlength="100" formControlName="VIA_NO" class="form-control">
                                <label class="form-label">VIA No <span class="text-danger">
                                        *</span></label>
                                <div *ngIf="submitted3 && f6.VIA_NO.errors" class="invalid-feedback">
                                    VIA No is required</div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" (click)="insertVoyage()" class="form-btn">Submit</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="custModal" aria-labelledby="exampleModalLabel" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title w-100 text-center" id="exampleModalLabel">Add Customer</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeBtn5></button>

            </div>
            <div class="modal-body">
                <form [formGroup]="partyForm">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label2">Name<span class="text-danger"> *</span></label>
                                    <input maxlength="500" type="text" id="name"
                                        [ngClass]="{'invalid':submitted5 && fcp.CUST_NAME.errors}"
                                        formControlName="CUST_NAME" class="form-control2">
                                    <div *ngIf="submitted5 && fcp.CUST_NAME.errors?.required" class="invalid-feedback">
                                        Name is required
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label2">Address<span class="text-danger"> *</span></label>
                                    <textarea maxlength="500" type="text" id="address"
                                        [ngClass]="{'invalid':submitted5 && fcp.CUST_ADDRESS.errors}"
                                        formControlName="CUST_ADDRESS" class="form-control2"></textarea>
                                    <div *ngIf="submitted5 && fcp.CUST_ADDRESS.errors?.required"
                                        class="invalid-feedback">Address is required
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label2">Email</label>
                                    <input maxlength="255" type="text" id="CustomerEmail"
                                        [ngClass]="{'invalid':submitted5 && fcp.CUST_EMAIL.errors}"
                                        formControlName="CUST_EMAIL" class="form-control2">
                                    <div *ngIf="submitted5 && fcp.CUST_EMAIL.errors?.email" class="invalid-feedback">
                                        Email is invalid
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group" *ngIf="isGST">
                                    <label class="form-label2">GST No<span class="text-danger"> *</span></label>
                                    <input maxlength="15" type="text" id="gstin"
                                        [ngClass]="{'invalid':submitted5 && fcp.GSTIN.errors}" formControlName="GSTIN"
                                        class="form-control2">
                                    <div *ngIf="submitted5 && fcp.GSTIN.errors?.pattern" class="invalid-feedback">GST No
                                        is invalid
                                    </div>
                                    <div *ngIf="submitted5 && fcp.GSTIN.errors?.required" class="invalid-feedback">GST
                                        No is required
                                    </div>
                                </div>
                                <div class="form-group" *ngIf="!isGST">
                                    <label class="form-label2">Vat No/ License No<span class="text-danger">
                                            *</span></label>
                                    <input maxlength="30" type="text" id="gstin"
                                        [ngClass]="{'invalid':submitted5 && fcp.VAT_NO.errors}" formControlName="VAT_NO"
                                        class="form-control2">
                                    <div *ngIf="submitted5 && fcp.VAT_NO.errors?.required" class="invalid-feedback">Vat
                                        No is required
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label2" style="z-index: 1;">Type <span class="text-danger">
                                            *</span></label>
                                    <ng-multiselect-dropdown #multiSelect
                                        [ngClass]="{'invalid':submitted5 && fcp.CUST_TYPE_CODE.errors}"
                                        [placeholder]="'Select Type'" [settings]="dropdownSettings"
                                        [formControl]="fcp.CUST_TYPE_CODE" [data]="custTypeList"
                                        [(ngModel)]="selectedItems">
                                    </ng-multiselect-dropdown>
                                    <div *ngIf="submitted5 && fcp.CUST_TYPE_CODE.errors" class="invalid-feedback">Type
                                        is
                                        required
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label2">Contact No</label>
                                    <input (keypress)="numericOnly($event)" maxlength="10" type="text"
                                        formControlName="CUST_CONTACT" class="form-control2">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6 text-end">
                            <button class="form-btn-light w-50" (click)="CancelPartyMaster()">Clear</button>
                        </div>
                        <div class="col-md-6">
                            <button class="form-btn w-50" (click)="InsertPartyMaster()">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>