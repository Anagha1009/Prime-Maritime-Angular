<div class="section-title">
    <h2>New CRO</h2>
</div>
<div class="container">
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <input type="text" class="form-control" [(ngModel)]="bookingNo">
                    <label class="form-label">Booking No.</label>
                </div>
            </div>
            <div class="col-md-3">
                <button class="form-btn me-2" (click)="getBookingDetails()">Create CRO</button>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="isCRO">
        <div class="col-md-3">
            <div class="services" style="font-size: 14px;">
                <div class="icon-box text-start border" style="box-shadow: none;">
                    <h6>Booking Details</h6>
                    <hr>
                    <p class="description text-danger">{{bookingDetails?.BOOKING_NO}}</p>
                    <p class="description"><i class="bx bxs-ship"></i> <span class="text-info">
                            {{bookingDetails?.VESSEL_NAME}} -
                            {{bookingDetails?.VOYAGE_NO}}</span></p>
                    <p class="description"><i class="bx bx-user me-2"></i>{{bookingDetails?.CUSTOMER_NAME}}</p>

                    <p class="description">{{bookingDetails?.POL}} <i class="bx bx-right-arrow-circle"></i>
                        {{bookingDetails?.POD}}</p>
                    <h6 class="mt-3">Container Details</h6>
                    <hr>
                    <div *ngFor="let item of containerList">
                        <p class="description">{{item.CONTAINER_TYPE}} - {{item.CONTAINER_SIZE}}</p>
                        <p class="description">{{item.SERVICE_MODE}}</p>
                        <p class="description"><i class="bx bx-box me-2"></i>{{item.IMM_VOLUME_EXPECTED}}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <form [formGroup]="croForm">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <ng-select [ngClass]="{'invalid': submitted && f.STUFFING_TYPE.errors}"  formControlName="STUFFING_TYPE">
                                <ng-option value="" selected="true" disabled>--Select--</ng-option>
                                <ng-option value="Factory">Factory</ng-option>
                                <ng-option value="ICD">ICD</ng-option>
                                <ng-option value="PORT">PORT</ng-option>
                            </ng-select>
                            <label class="form-label-ddl">Stuffing Type<span class="text-danger">*</span></label>
                            <div *ngIf="submitted && f.STUFFING_TYPE.errors" class="invalid-feedback">Please
                                select
                                Stuffing Type</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <ng-select [ngClass]="{'invalid': submitted && f.EMPTY_CONT_PCKP.errors}" formControlName="EMPTY_CONT_PCKP">
                                <ng-option value="" selected="true" disabled>--Select--
                                </ng-option>
                                <ng-option value="ADTC-ADTC - Dammam">
                                    ADTC-ADTC - Dammam
                                </ng-option>
                                <ng-option value="BCT-Bay Container Terminal">
                                    BCT-Bay Container Terminal
                                </ng-option>
                            </ng-select>
                            <label class="form-label-ddl">Cont Pickup Point<span class="text-danger">*</span></label>
                            <div *ngIf="submitted && f.EMPTY_CONT_PCKP.errors" class="invalid-feedback">Please select
                                Container Pickup Point</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <ng-select [ngClass]="{'invalid': submitted && f.LADEN_ACPT_LOCATION.errors}"  formControlName="LADEN_ACPT_LOCATION">
                                <ng-option value="" selected="true" disabled>--Select--
                                </ng-option>
                                <ng-option value="INMUN-MUNDRA">
                                    INMUN-MUNDRA
                                </ng-option>
                                <ng-option value="INSAJ6-ICD TUMB">
                                    INSAJ6-ICD TUMB
                                </ng-option>
                            </ng-select>
                            <label class="form-label-ddl">Laden Act Location<span class="text-danger">*</span></label>
                            <div *ngIf="submitted && f.LADEN_ACPT_LOCATION.errors" class="invalid-feedback">Please select
                                Laden act Location</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <input type="date" class="form-control" [ngClass]="{'invalid': submitted && f.CRO_VALIDITY_DATE.errors}"  formControlName="CRO_VALIDITY_DATE">
                            <label class="form-label">CRO Validity Date <span class="text-danger">*</span></label>
                            <div *ngIf="submitted && f.CRO_VALIDITY_DATE.errors" class="invalid-feedback">Please select
                                Cro Validity Date</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <div class="form-group">
                                <input type="text" maxlength="100" formControlName="PLACE_OF_RECEIPT"
                                    class="form-control">
                                <label class="form-label"> Remarks <span class="text-danger">*</span></label>
                                <div *ngIf="submitted && f.REMARKS.errors" class="invalid-feedback">
                                    Please Enter Remarks
                                   </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <input type="text" maxlength="100" formControlName="REQ_QUANTITY"
                                    class="form-control">
                                <label class="form-label"> Required Qty<span class="text-danger">*</span></label>
                                <div *ngIf="submitted && f.REQ_QUANTITY.errors" class="invalid-feedback">
                                    Please Enter Required Quantity
                                   </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <div class="form-group">
                            <input type="text" maxlength="100" formControlName="REQ_QUANTITY"
                                    class="form-control">
                                <label class="form-label"> Gross Weight<span class="text-danger">*</span></label>
                                <div *ngIf="submitted && f.GROSS_WT.errors" class="invalid-feedback">
                                    Please Enter Gross Weight
                                   </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <ng-select [ngClass]="{'invalid': submitted && f.GROSS_WT_UNIT.errors}" formControlName="GROSS_WT_UNIT">
                                <ng-option value="" selected="true" disabled>--Select Unit--
                                </ng-option>
                                <ng-option value="Kg">
                                    Kg
                                </ng-option>
                                <ng-option value="Ton">
                                    Ton
                                </ng-option>
                            </ng-select>
                            <label class="form-label-ddl">Unit <span class="text-danger">*</span></label>
                            <div *ngIf="submitted && f.GROSS_WT_UNIT.errors" class="invalid-feedback">Please select
                               Unit</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <ng-select [ngClass]="{'invalid': submitted && f.PACKAGES.errors}"  formControlName="PACKAGES">
                                <ng-option value="" selected="true" disabled>--Select Packages--</ng-option>
                                <ng-option value="Bags">
                                    Bags
                                </ng-option>
                                <ng-option value="Bundles">
                                    Bundles
                                </ng-option>
                            </ng-select>
                            <label class="form-label-ddl">Packages <span class="text-danger">*</span></label>
                            <div *ngIf="submitted && f.PACKAGES.errors" class="invalid-feedback">Please Select Packages
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <input type="text" maxlength="100" formControlName="NO_OF_PACKAGES"
                                    class="form-control">
                                <label class="form-label"> No of Packages<span class="text-danger">*</span></label>
                                <div *ngIf="submitted && f.NO_OF_PACKAGES.errors" class="invalid-feedback">Please Select No of Packages
                                   </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2 offset-md-10" style="text-align: right;">
                        <button (click)="SaveCRO()" class="form-btn">Submit</button>
                        <button #openBtn data-bs-toggle="modal" href="#mailModal"
                            class="form-btn d-none">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="col-md-5 mx-auto" *ngIf="!isRecords">
        <h5 class="text-center">Sorry! No records found !!</h5>
        <img src="./../../../assets/img/doimg.jpg" class="img-fluid" alt="">
    </div>
</div>

<div class="modal fade" id="mailModal" aria-labelledby="exampleModalLabel" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Send Email</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeBtn></button>
            </div>
            <div class="modal-body">
                <h6 class="text-center"><span class="text-danger">{{croNo}}</span> has successfully been
                    created !
                </h6>
                <p class="text-center">Please provide email to send CRO and SI to shipper</p>
                <div class="form-group col-md-8 mx-auto">
                    <label class="form-label2">Email</label>
                    <input class="form-control2" [(ngModel)]="email" />
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="form-btn" (click)="getCRODetails(croNo)">Send Email</button>
            </div>
        </div>
    </div>
</div>