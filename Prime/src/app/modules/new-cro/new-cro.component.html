<div class="section-title">
    <h2>New CRO</h2>
</div>
<div class="container">
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <input type="text" class="form-control" [(ngModel)]="bookingNo">
                    <label class="form-label">Booking No.</label>
                </div>
            </div>
            <div class="col-md-3">
                <button class="form-btn me-2" (click)="getBookingDetails()">Create CRO</button>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="isCRO">
        <div class="col-md-3">
            <div class="services" style="font-size: 14px;">
                <div class="icon-box text-start border" style="box-shadow: none;">
                    <h6>Booking Details</h6>
                    <hr>
                    <p class="description text-danger">{{bookingDetails?.BOOKING_NO}}</p>
                    <p class="description"><i class="bx bxs-ship"></i> <span class="text-info">
                            {{bookingDetails?.VESSEL_NAME}} -
                            {{bookingDetails?.VOYAGE_NO}}</span></p>
                    <p class="description"><i class="bx bx-user me-2"></i>{{bookingDetails?.CUSTOMER_NAME}}</p>

                    <p class="description">{{bookingDetails?.POL}} <i class="bx bx-right-arrow-circle"></i>
                        {{bookingDetails?.POD}}</p>
                    <h6 class="mt-3">Container Details</h6>
                    <hr>
                    <div *ngFor="let item of containerList">
                        <p class="description">{{item.CONTAINER_TYPE}} - {{item.CONTAINER_SIZE}}</p>
                        <p class="description">{{item.SERVICE_MODE}}</p>
                        <p class="description"><i class="bx bx-box me-2"></i>{{item.IMM_VOLUME_EXPECTED}}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <form [formGroup]="croForm">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">Stuffing Type</label>
                            <select class="form-control2" [ngClass]="{'invalid': submitted && f.STUFFING_TYPE.errors}"
                                formControlName="STUFFING_TYPE">
                                <option value="" selected="true" disabled>--Select--
                                </option>
                                <option value="Factory">Factory</option>
                                <option value="ICD">ICD</option>
                                <option value="PORT">PORT</option>
                            </select>
                            <div *ngIf="submitted && f.STUFFING_TYPE.errors" class="invalid-feedback">Please
                                select
                                STUFFING TYPE</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">Cont Pickup Point</label>
                            <select class="form-control2" formControlName="EMPTY_CONT_PCKP">
                                <option value="" selected="true" disabled>--Select--
                                </option>
                                <option value="ADTC-ADTC - Dammam">
                                    ADTC-ADTC - Dammam
                                </option>
                                <option value="BCT-Bay Container Terminal">
                                    BCT-Bay Container Terminal
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">Laden Act Location</label>
                            <select class="form-control2" formControlName="LADEN_ACPT_LOCATION">
                                <option value="" selected="true" disabled>--Select--
                                </option>
                                <option value="INMUN-MUNDRA">
                                    INMUN-MUNDRA
                                </option>
                                <option value="INSAJ6-ICD TUMB">
                                    INSAJ6-ICD TUMB
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">CRO Validity Date</label>
                            <input formControlName="CRO_VALIDITY_DATE" type="date" class="form-control2">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">Remarks</label>
                            <textarea formControlName="REMARKS" type="text" class="form-control2"></textarea>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">Required Qty</label>
                            <input formControlName="REQ_QUANTITY" type="text" class="form-control2">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="form-label2">Gross Weight</label>
                            <input formControlName="GROSS_WT" type="text" class="form-control2">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="form-label2">Unit</label>
                            <select class="form-control2" formControlName="GROSS_WT_UNIT">
                                <option value="" selected="true" disabled>--Select Unit--
                                </option>
                                <option value="Kg">
                                    Kg
                                </option>
                                <option value="Ton">
                                    Ton
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">Packages</label>
                            <select class="form-control2" formControlName="PACKAGES">
                                <option value="" selected="true" disabled>--Select Packages--</option>
                                <option value="Bags">
                                    Bags
                                </option>
                                <option value="Bundles">
                                    Bundles
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label2">No of Packages</label>
                            <input formControlName="NO_OF_PACKAGES" type="text" class="form-control2">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2 offset-md-10" style="text-align: right;">
                        <button (click)="SaveCRO()" class="form-btn">Submit</button>
                        <button #openBtn data-bs-toggle="modal" href="#mailModal"
                            class="form-btn d-none">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="col-md-5 mx-auto" *ngIf="!isRecords">
        <h5 class="text-center">Sorry! No records found !!</h5>
        <img src="./../../../assets/img/doimg.jpg" class="img-fluid" alt="">
    </div>
</div>

<div class="modal fade" id="mailModal" aria-labelledby="exampleModalLabel" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Send Email</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeBtn></button>
            </div>
            <div class="modal-body">
                <h6 class="text-center"><span class="text-danger">{{croNo}}</span> has successfully been
                    created !
                </h6>
                <p class="text-center">Please provide email to send CRO and SI to shipper</p>
                <div class="form-group col-md-8 mx-auto">
                    <label class="form-label2">Email</label>
                    <input class="form-control2" [(ngModel)]="email" />
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="form-btn" (click)="getCRODetails(croNo)">Send Email</button>
            </div>
        </div>
    </div>
</div>