<div class="mt-4 ps-4 pt-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-white">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
        </ol>
    </nav>
</div>
<div class="container">
    <div class="col-md-2 mb-3">
        <button type="button" routerLink="/home/new-quotation" class="btn btn-block btn-secondary btn-rounded">New
            Quotation</button>
    </div>
    <div class="row">
        <div class="col-md-2">
            <div class="card border">
                <div class="card-body">
                    <div class="counter">
                        <div class="number-info">
                            <i class="fas fa-2x fa-hand-holding-usd text-info"></i>
                            <span class="timer text-info" style="font-size: 30px;">
                                15
                            </span>
                            <p class="text-muted" style="font-size: 12px;">QUOTATION REQUESTED</p>
                        </div>
                    </div>
                    <hr>
                    <div class="counter">
                        <div class="number-info">
                            <i class="fas fa-clipboard-list fa-2x text-success"></i>
                            <span class="timer text-success" style="font-size: 30px;">
                                15
                            </span>
                            <p class="text-muted" style="font-size: 12px;">BOOKING PENDING</p>
                        </div>
                    </div>
                    <hr>
                    <div class="counter">
                        <div class="number-info">
                            <i class="fas fa-calendar-check fa-2x text-warning"></i>
                            <span class="timer text-warning" style="font-size: 30px;">
                                20
                            </span>
                            <p class="text-muted" style="font-size: 12px;">BOOKING CONFIRMED</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-10">
            <form [formGroup]="quotationForm">
                <div class="row">
                    <div class="col-md-3 mb-4">
                        <div class="form-group">
                            <input type="text" formControlName="SRR_NO" class="form-control">
                            <label class="form-label">Reference No</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="form-outline">
                            <ng-select formControlName="CUSTOMER_NAME">
                                <ng-option value="" disabled>--Customer--</ng-option>
                                <ng-option value="JITEX">JITEX</ng-option>
                                <ng-option value="MASDAR TECHNICAL SUPPLIES TRADING CO.">MASDAR TECHNICAL
                                    SUPPLIES
                                    TRADING CO.
                                </ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-outline">
                            <ng-select formControlName="STATUS">
                                <ng-option value="" disabled>--Status--</ng-option>
                                <ng-option value="Requested">Requested</ng-option>
                                <ng-option value="Approved">Approved
                                </ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <button type="button" (click)="searchSRRList()" class="btn btn-outline-dark me-2"
                            data-mdb-ripple-color="dark">Search</button>
                        <button type="button" (click)="clearSRRList()" class="btn btn-default"
                            data-mdb-ripple-color="dark">Clear</button>
                    </div>
                </div>
            </form>
            <div [class]="isScroll ? 'scrollbar' : ''" id="style-3">
                <div [class]="isScroll ? 'force-overflow' : ''">
                    <div [class]="i == 0 ? 'card border me-2' : 'card border me-2 mt-2'"
                        *ngFor="let item of srrList;let i = index;">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <h6>{{ item.SRR_NO }}</h6>
                                    <p>{{ item.CUSTOMER_NAME }} </p>
                                    <h6>No of Containers CNF <span class="text-danger">{{
                                            item.NO_OF_CONTAINERS
                                            }}</span> </h6>
                                    <button type="button" data-toggle="modal"
                                        [attr.data-target]="'#' + 'containermodal' + i" class="btn btn-light me-2">Add
                                        Containers</button>
                                </div>
                                <div class="col-md-4">
                                    <p>{{ item.EFFECT_FROM | date: "mediumDate" }} -
                                        {{ item.EFFECT_TO | date: "mediumDate" }}</p>
                                    <p>Created on - {{ item.CREATED_DATE | date: "mediumDate" }}</p>
                                    <span *ngIf="item.STATUS == 'Requested'"
                                        class="badge border w-50 rounded-pill p-2 badge-light mb-3">{{
                                        item.STATUS
                                        }}</span>
                                    <span *ngIf="item.STATUS == 'Approved'"
                                        class="badge border w-50 rounded-pill p-2 badge-success mb-3">{{
                                        item.STATUS
                                        }}</span>
                                </div>
                                <div class="col-md-4" style="text-align: right;">
                                    <button (click)="bookNow()" class="btn btn-info btn-rounded me-2">Book
                                        Now</button>
                                    <button type="button" #openBtn data-toggle="modal"
                                        [attr.data-target]="'#' + 'modal' + i"
                                        class="btn btn-info btn-rounded me-2 d-none">Book Now</button>
                                </div>
                            </div>
                            <!-- Modal -->
                            <div class="modal fade" id="{{'modal' + i}}" tabindex="-1"
                                aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-xl">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Booking Details</h5>
                                            <button type="button" class="btn-close" data-dismiss="modal"
                                                aria-label="Close" #closeBtn1></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="col-md-12">
                                                <div class="row mb-2">
                                                    <div class="col-md-4">
                                                        <h6>POL : <small class="text-danger">
                                                                {{item.POL}}</small>
                                                            POD :
                                                            <small class="text-danger">{{item.POD}}</small>
                                                        </h6>

                                                    </div>
                                                    <div class="col-md-4 offset-md-4" style="text-align: right;">
                                                        <button (click)="slotAllocation()" class="btn btn-info">
                                                            <i class="fa fa-plus mr-1"></i>Slot
                                                            Allocation</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Vessel Name</th>
                                                        <th>Voyage No</th>
                                                        <th>Mother Vessel</th>
                                                        <th>Mother Voyage</th>
                                                        <th>Slot Operator</th>
                                                        <th>No of Slots</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of slotDetailsForm.get('SLOTDETAILS').controls;let j = index;"
                                                        [formGroup]="item">
                                                        <td>
                                                            <input type="text" formControlName="VESSEL_NAME"
                                                                class="form-control" />
                                                        </td>
                                                        <td>
                                                            <input type="text" formControlName="VOYAGE_NO"
                                                                class="form-control" />
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control"
                                                                formControlName="MOTHER_VESSEL_NAME" />
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control"
                                                                formControlName="MOTHER_VOYAGE_NO" />
                                                        </td>
                                                        <td class="col-md-2">
                                                            <ng-select formControlName="SLOT_OPERATOR">
                                                                <ng-option value="" selected disabled>
                                                                    --Slot
                                                                    Operator--</ng-option>
                                                                <ng-option value="xx">xx</ng-option>
                                                                <ng-option value="yy">yy
                                                                </ng-option>
                                                                <ng-option value="yy">ghfghfgjhjhjhjhj
                                                                </ng-option>
                                                            </ng-select>
                                                        </td>
                                                        <td>
                                                            <input formControlName="NO_OF_SLOTS" type="text"
                                                                class="form-control" />
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary">Clear</button>
                                            <button type="button" class="btn btn-outline-dark">Book Now</button>
                                            <!-- <button type="button" (click)="addSlots(i)"
                                                class="btn btn-primary">Add Slot</button> -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--Add Container Modal-->
                            <div class="modal fade" id="{{'containermodal' + i}}" tabindex="-1" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Container Details
                                            </h5>
                                            <button type="button" class="btn-close" data-dismiss="modal"
                                                aria-label="Close" #closeBtn></button>
                                        </div>
                                        <div class="modal-body">
                                            <form [formGroup]="containerForm">
                                                <div class="row">
                                                    <div class="form-group col-md-12">
                                                        <label>SRR No -
                                                            <b>{{srrList[i].SRR_NO}}</b></label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <input type="text"
                                                            [ngClass]="{'invalid': submitted && f.NO_OF_CONTAINERS.errors}"
                                                            formControlName="NO_OF_CONTAINERS" class="form-control" />
                                                        <label class="form-label">No of Containers</label>
                                                        <div *ngIf="submitted && f.NO_OF_CONTAINERS.errors"
                                                            class="invalid-feedback">Please enter
                                                            No of Containers</div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary">Clear</button>
                                            <button type="button" (click)="addContainer(i)" class="btn btn-primary">Add
                                                Container</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>